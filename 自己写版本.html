<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>my</title>
    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/index.css" />
  </head>

  <body style="height: 1000px">
    <!--包裹器   整个页面的容器-->
    <div class="wrap">
      <!--窗口侧边栏-->
      <div class="toolBar toolWrap">
        <!--内容容器-->
        <div class="content"></div>
        <!--面包屑-->
        <div class="but list"></div>
        <!--中间列表-->
        <ul class="toolList">
          <li>
            <i class="tabIcon vip"></i>
            <em>尚品汇员</em>
          </li>
          <li>
            <i class="tabIcon cart"></i>
            <em>购物车</em>
          </li>
          <li>
            <i class="tabIcon follow"></i>
            <em>我的关注</em>
          </li>
          <li>
            <i class="tabIcon history"></i>
            <em>历史记录</em>
          </li>
          <li>
            <i class="tabIcon message"></i>
            <em>消息</em>
          </li>
          <li>
            <i class="tabIcon qus"></i>
            <em>咨询</em>
          </li>
        </ul>
        <!--回到顶部-->
        <div class="back">
          <i class="tabIcon"></i>
          <em></em>
        </div>
      </div>
      <!-- 头部区域 -->
      <header class="header">
        <!--头部第一行-->
        <div class="top">
          <div class="container">
            <!--登录-->
            <div class="login">
              <p>尚品汇欢迎您！</p>
              <p>
                <span>请</span>
                <a href="###">登录</a>
                <a href="###" class="register">免费注册</a>
              </p>
            </div>
            <!--头部导航-->
            <div class="headerNav">
              <a href="###">我的订单</a>
              <a href="###">我的购物车</a>
              <a href="###">我的尚品汇</a>
              <a href="###">尚品汇会员</a>
              <a href="###">企业采购</a>
              <a href="###">关注尚品汇</a>
              <a href="###">合作招商</a>
              <a href="###">商家后台</a>
            </div>
          </div>
        </div>
        <!--头部第二行-->
        <div class="bottom">
          <h1 class="logoArea">
            <a href="###">
              <img src="img/Logo.png" alt="尚品汇" />
            </a>
          </h1>
          <div class="searchArea">
            <form action="">
              <input type="text" />
              <button>搜索</button>
            </form>
          </div>
        </div>
      </header>
      <!--商品导航分类-->
      <div class="typeNav">
        <div class="container">
          <h2 class="all">全部商品分类</h2>
          <nav>
            <a href="###">服装城</a>
            <a href="###">美妆馆</a>
            <a href="###">尚品汇超市</a>
            <a href="###">全球购</a>
            <a href="###">闪购</a>
            <a href="###">团购</a>
            <a href="###">有趣</a>
            <a href="###">秒杀</a>
          </nav>
        </div>
      </div>
      <!--商品主要内容区域-->
      <section class="con">
        <!--路径导航（面包屑导航）-->
        <div class="conPoin">
          <!-- <a href="###">手机、数码、通讯</a>
          <a href="###">手机</a>
          <a href="###">Apple苹果</a>
          <a>iphone 6S系类</a> -->
        </div>
        <!--主要内容区域-->
        <div class="mainCon">
          <!--左侧放大镜-->
          <div class="previewWrap">
            <!--放大镜效果-->
            <div class="preview">
              <!--小图-->
              <div class="zoom">
                <!-- <img src="img/s1.png" alt=""> -->
              </div>
              <!--大图-->
            </div>
            <!--缩略图效果-->
            <div class="specScroll">
              <a class="prev">&lt;</a>
              <div class="itemCon">
                <ul class="list">
                  <!-- <li><img src="img/s1.png" alt=""></li>
                <li><img src="img/s2.png" alt=""></li>
                <li><img src="img/s3.png" alt=""></li>
                <li><img src="img/s1.png" alt=""></li>
                <li><img src="img/s2.png" alt=""></li>
                <li><img src="img/s3.png" alt=""></li>
                <li><img src="img/s1.png" alt=""></li>
                <li><img src="img/s2.png" alt=""></li> -->
                </ul>
              </div>
              <a class="next">&gt;</a>
            </div>
          </div>
          <!--右侧商品信息-->
          <div class="infoWrap">
            <div class="info1"></div>
            <div class="choose">
              <div class="chooseArea">
                <div class="choosed"></div>
              </div>
              <div class="carWrap">
                <div class="controls">
                  <input type="text" value="1" />
                  <a href="###" class="plus">+</a>
                  <a href="###" class="mins">-</a>
                </div>
                <div class="addBtn">
                  <a href="###">加入购物车</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!--商品详情页-->
      <section class="productDetail">
        <!--侧边栏-->
        <aside class="aside">
          <!--选项卡切换的按钮-->
          <div class="tabWrap">
            <h4 class="active">相关分类</h4>
            <h4>推荐品牌</h4>
          </div>
          <!--选项卡内容-->
          <div class="tabContent">
            <div class="active">
              <ul class="partList">
                <li>手机</li>
                <li>手机壳</li>
                <li>内存卡</li>
                <li>iphone配件</li>
                <li>贴膜</li>
                <li>手机耳机</li>
                <li>移动电源</li>
                <li>平板电脑</li>
              </ul>
              <ul class="goodsList">
                <li>
                  <div class="gImg">
                    <img src="img/part01.png" alt="" />
                  </div>
                  <p class="attr">Apple苹果iPhone 6s (A1699)</p>
                  <p class="price">¥6088.00</p>
                  <div class="addCar">
                    <a href="###">加入购物车</a>
                  </div>
                </li>
                <li>
                  <div class="gImg">
                    <img src="img/part02.png" alt="" />
                  </div>
                  <p class="attr">Apple苹果iPhone 6s (A1699)</p>
                  <p class="price">¥6088.00</p>
                  <div class="addCar">
                    <a href="###">加入购物车</a>
                  </div>
                </li>
                <li>
                  <div class="gImg">
                    <img src="img/part03.png" alt="" />
                  </div>
                  <p class="attr">Apple苹果iPhone 6s (A1699)</p>
                  <p class="price">¥6088.00</p>
                  <div class="addCar">
                    <a href="###">加入购物车</a>
                  </div>
                </li>
                <li>
                  <div class="gImg">
                    <img src="img/part01.png" alt="" />
                  </div>
                  <p class="attr">Apple苹果iPhone 6s (A1699)</p>
                  <p class="price">¥6088.00</p>
                  <div class="addCar">
                    <a href="###">加入购物车</a>
                  </div>
                </li>
              </ul>
            </div>
            <div>推荐品牌</div>
          </div>
        </aside>
        <div class="detail">
          <div class="fitting">
            <h4>选择搭配</h4>
            <div class="goodSuits">
              <div class="master">
                <img src="img/l-m01.png" alt="" />
                <p>¥5299</p>
                <i>+</i>
              </div>
              <ul class="suits">
                <li class="suitsItem">
                  <img src="img/dp01.png" alt="" />
                  <p>Feless费勒斯VR</p>
                  <label>
                    <input type="checkbox" value="39" />
                    <span>39</span>
                  </label>
                </li>
                <li class="suitsItem">
                  <img src="img/dp02.png" alt="" />
                  <p>Feless费勒斯VR</p>
                  <label>
                    <input type="checkbox" value="39" />
                    <span>39</span>
                  </label>
                </li>
                <li class="suitsItem">
                  <img src="img/dp03.png" alt="" />
                  <p>Feless费勒斯VR</p>
                  <label>
                    <input type="checkbox" value="39" />
                    <span>39</span>
                  </label>
                </li>
                <li class="suitsItem">
                  <img src="img/dp04.png" alt="" />
                  <p>Feless费勒斯VR</p>
                  <label>
                    <input type="checkbox" value="39" />
                    <span>39</span>
                  </label>
                </li>
              </ul>
              <div class="result">
                <div>已选购0件商品</div>
                <p class="price-tit">套餐价</p>
                <p class="price">¥5299</p>
                <button>加入购物车</button>
              </div>
            </div>
          </div>
          <div class="intro">
            <ul class="tabWrap">
              <li class="active"><a href="###">商品介绍</a></li>
              <li><a href="###">规格与包装</a></li>
              <li><a href="###">售后保障</a></li>
              <li><a href="###">商品评价</a></li>
              <li><a href="###">手机社区</a></li>
            </ul>
            <div class="tabContent">
              <div class="active">
                <ul class="goodsIntro">
                  <li>分辨率：1920*1080(FHD)</li>
                  <li>后置摄像头：1200万像素</li>
                  <li>前置摄像头：500万像素</li>
                  <li>核 数：其他</li>
                  <li>频 率：以官网信息为准</li>
                  <li>品牌： Apple</li>
                  <li>商品名称：APPLEiPhone 6s Plus</li>
                  <li>商品编号：1861098</li>
                  <li>商品产地：中国大陆</li>
                  <li>商品毛重：0.51kg</li>
                  <li>热点：指纹识别，Apple Pay，金属机身，拍照神器</li>
                </ul>
                <div class="introImg">
                  <img src="img/intro01.png" alt="" />
                  <img src="img/intro02.png" alt="" />
                  <img src="img/intro03.png" alt="" />
                </div>
              </div>
              <div>规格与包装</div>
              <div>售后保障</div>
              <div>商品评价</div>
              <div>手机社区</div>
            </div>
          </div>
        </div>
      </section>
    </div>
    <script src="./js/data.js"></script>
    <script src="./js/jquery.js"></script>
    <script>
      //左上角导航
      var crumbsData = goodData.path;
      // console.log(crumbsData);
      var htmlStr = '';
      crumbsData.forEach(function (item, index) {
        if (index != crumbsData.length - 1) {
          htmlStr += ` <a href="${item.url}">${item.title}</a>`;
        } else {
          htmlStr += ` <a href="">${item.index}</a>`;
        }
      });

      var conPoin = document.querySelector('.con .conPoin');
      conPoin.innerHTML = htmlStr;

      //左侧tab
      function setTab() {
        var leftTab = document.querySelectorAll(
          '.wrap .productDetail .aside .tabWrap h4'
        );
        var leftTabConter = document.querySelectorAll(
          '.wrap .productDetail .aside .tabContent > div '
        );
        var leftTabConter = Array.from(leftTabConter);
        var leftTab = Array.from(leftTab);
        // console.log(leftTabConter);
        leftTab.forEach(function (item, index) {
          item.onclick = function () {
            for (var i = 0; i < leftTab.length; i++) {
              leftTab[i].classList.remove('active');
              leftTabConter[i].classList.remove('active');
            }
            item.classList.add('active');
            leftTabConter[index].classList.add('active');
          };
        });

        //中间tab
        var middoTab = document.querySelectorAll(
          '.wrap .productDetail .detail .intro .tabWrap li'
        );
        var middoTabContent = document.querySelectorAll(
          '.wrap .productDetail .detail .intro .tabContent > div'
        );
        var middoTab = Array.from(middoTab);
        var middoTabContent = Array.from(middoTabContent);
        middoTab.forEach(function (item, index) {
          item.onclick = function () {
            for (var j = 0; j < middoTab.length; j++) {
              middoTab[j].classList.remove('active');
              middoTabContent[j].classList.remove('active');
            }
            item.classList.add('active');
            middoTabContent[index].classList.add('active');
          };
        });
      }
      setTab();
      //放大镜
      fangda();
      function fangda() {
        var bigImageBox = document.querySelector(
          '.wrap .con .mainCon .previewWrap .preview'
        );
        var smallImageBox = document.querySelector(
          '.wrap .con .mainCon .previewWrap .preview .zoom'
        );
        //进来默认的
        var smallImg = new Image();
        smallImg.src = goodData.imgsrc[0].s;
        smallImageBox.appendChild(smallImg);

        smallImageBox.onmouseenter = function () {
          //mask遮盖
          mask = document.createElement('div');
          mask.classList.add('mask');
          smallImageBox.appendChild(mask);

          //大图
          bigImag = new Image();
          bigImag.src = goodData.imgsrc[0].b;

          //big BOX大图盒子
          var bigBox = document.createElement('div');
          bigBox.className = 'bigBox';
          bigImageBox.appendChild(bigBox);
          bigBox.appendChild(bigImag);

          //onmouseleave鼠标离开的
          smallImageBox.onmouseleave = function () {
            smallImageBox.removeChild(mask);
            bigImageBox.removeChild(bigBox);
            mask = bigImgBox = bigImg = null;
            // // 解绑鼠标移动和离开事件
            // smallImgBox.onmousemove = null;
            // smallImgBox.onmouseleave = null;
          };
          //鼠标移动
          var maskWidth = document.querySelector(
            '.wrap .con .mainCon .previewWrap .preview .zoom .mask'
          ); /*mask的一半*/
          smallImageBox.onmousemove = function (e) {
            var boxTop = smallImageBox.getBoundingClientRect().top;
            var boxLeft = smallImageBox.getBoundingClientRect().left;
            // 遮盖left = 基于客户端的x坐标 - 遮盖宽度一半 - 减去小图片盒子距离视口的高度
            var maskmoveTop = e.clientY - boxTop - mask.offsetHeight / 2;
            var maskmoveLeft = e.clientX - boxLeft - mask.offsetWidth / 2;
            //计算遮盖mask最大移动范围
            var maxTop = smallImageBox.offsetHeight - mask.offsetHeight;
            var maxLeft = smallImageBox.offsetWidth - mask.offsetWidth;
            if (maskmoveTop > maxTop) {
              maskmoveTop = maxTop;
            } else if (maskmoveLeft > maxLeft) {
              maskmoveLeft = maxLeft;
            } else if (maskmoveLeft < 0) {
              maskmoveLeft = 0;
            } else if (maskmoveTop < 0) {
              maskmoveTop = 0;
            }
            mask.style.top = maskmoveTop + 'px';
            mask.style.left = maskmoveLeft + 'px';
            //大图的移动
            // 比例关系： 遮盖的移动距离 / 遮盖最大的移动距离 = 大图的移动距离(未知) / 大图最大的移动距离（未知）
            //大图最大移动距离
            var boxLeftMax = bigImag.offsetWidth - bigBox.offsetWidth;
            var boxTopMax = bigImag.offsetHeight - bigBox.offsetTop;
            //大图的移动距离位置
            // 大图的移动距离 = (遮盖的移动距离 * 大图最大的移动距离) / 遮盖最大的移动距离
            var boxLeft = (maskmoveLeft * boxLeftMax) / maxLeft;
            var boxTop = (maskmoveTop * boxTopMax) / maxTop;
            bigImag.style.top = -boxTop + 'px';
            bigImag.style.left = -boxLeft + 'px';

            bigImag.style.left = maskmoveLeft;
          };
        };
      }
      //右边的菜单
      rightList();
      function rightList() {
        var str = `<h3 class="infoName">${goodData.goodsDetail.title}</h3>
<p class="news">${goodData.goodsDetail.recommend}</p>
<div class="priceArea">
  <div class="priceArea1">
    <div class="title">价&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;格</div>
    <div class="price">
      <i>￥</i>
      <em>${goodData.goodsDetail.price}</em>
      <span>降价通知</span>
    </div>
    <div class="remark">
      <i>累计评价</i>
      <span>19876</span>
    </div>
  </div>
  <div class="priceArea2">
    <div class="title">促&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;销</div>
    <div class="fixWidth">
      <i>加价购</i>
      <span>${goodData.goodsDetail.promoteSales.content} </span>
    </div>
  </div>
</div>
<div class="support">
  <div>
    <div class="title">支&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;持</div>
    <div class="fixWidth">以旧换新，闲置手机回收 4G套餐超值抢 礼品购</div>
  </div>
  <div>
    <div class="title">配&nbsp;送&nbsp;至</div>
    <div class="fixWidth">${goodData.goodsDetail.address}</div>
  </div>
</div>`;

        document.querySelector(
          '.wrap .con .mainCon .infoWrap .info1'
        ).innerHTML = str;
      }
      canshu();
      function canshu() {
        var element = $('.wrap .con .mainCon .infoWrap .choose .chooseArea');

        var chanshu = goodData.goodsDetail.crumbData;
        // console.log(chanshu);
        chanshu.forEach(function (item, index) {
          var dl = document.createElement('dl');
          var dt = document.createElement('dt');
          dt.innerHTML = item.title;
          dl.appendChild(dt);
          element[0].appendChild(dl);
          item.data.forEach(function (data, index) {
            var dd = document.createElement('dd');
            dd.innerHTML = data.type;
            dl.appendChild(dd);
          });
        });
      }
      function listImag() {
        var list = $(
          '.wrap .con .mainCon .previewWrap .specScroll .itemCon .list'
        );
        var right = document.querySelector(
          '.wrap .con .mainCon .previewWrap .specScroll .next'
        );
        var left = document.querySelector(
          '.wrap .con .mainCon .previewWrap .specScroll .prev'
        );
        goodData.imgsrc.forEach(function (item, index) {
          var image = document.createElement('img');
          image.src = item.s;
          var li = document.createElement('li');
          li.appendChild(image);
          list[0].appendChild(li);
        });
        //循环添加小图片列表
        var sum = 0;
        var maxImag = 5;
        var lis = document.querySelectorAll(
          '.wrap .con .mainCon .previewWrap .specScroll .itemCon .list > li'
        );
        var ulWidth =
          lis[0].offsetWidth +
          parseInt(window.getComputedStyle(lis[0]).marginRight); //75
        var ul = document.querySelector(
          '.wrap .con .mainCon .previewWrap .specScroll .itemCon .list'
        );
        var imgs = document.querySelectorAll(
          '.wrap .con .mainCon .previewWrap .specScroll .itemCon .list li img'
        );
        // console.log(imgs);
        left.onclick = function () {
          if (sum === 0) {
            return;
          }

          sum -= ulWidth;
          ul.style.left = -sum + 'px';
        };
        right.onclick = function (item, index) {
          if ((lis.length - maxImag) * ulWidth <= sum) {
            return;
          }
          sum += ulWidth;
          ul.style.left = -sum + 'px';
        };
        // lis.forEach(function (item, index) {
        //   item.onclick = function () {
        //     console.log(this);
        //   }
        // })

        var smailImg = document.querySelector(
          '.wrap .con .mainCon .previewWrap .preview .zoom img'
        );

        imgs.forEach(function (img, index) {
          img.onclick = function () {
            smailImg.src = this.src;
            console.log(this.src);
          };
        });
        /////排他法
      }
      listImag();
      function chanshuOn() {
        var arr = new Array(4);

        console.log(arr);

        var dls = document.querySelectorAll(
          '.wrap .con .mainCon .infoWrap .choose .chooseArea dl'
        );
        var choosed = document.querySelector(
          '.wrap .con .mainCon .infoWrap .choose .chooseArea .choosed'
        );

        dls.forEach(function (dl, index) {
          dl.querySelectorAll('dd').forEach(function (dd) {
            dd.onclick = function () {
              //排他改变颜色
              $(dd.parentElement.querySelectorAll('dd')).css('color', '#666');
              dd.style.color = 'red';

              arr[index] = this.innerHTML;
              arr.forEach(function (arr) {
                if (arr == 0) {
                  return;
                }
                var aa = document.createElement('a');

                aa.setAttribute('resultIndex', index);
                aa.innerHTML = 'X';
                var mark = document.createElement('mark');
                mark.innerHTML = arr;
                mark.appendChild(aa);
                choosed.appendChild(mark);

                //删除a
                var anode = document.querySelectorAll(
                  '.wrap .con .mainCon .infoWrap .choose .chooseArea .choosed mark a'
                );
                anode.forEach(function (a, index) {
                  a.onclick = function () {
                    $(this.parentElement).remove();
                  };
                });
              });
            };
          });
        });
      }
      chanshuOn();
    </script>
  </body>
</html>
